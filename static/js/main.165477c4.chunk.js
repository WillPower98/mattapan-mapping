(this["webpackJsonpmattapan-project"]=this["webpackJsonpmattapan-project"]||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var r,i,a,o,c,s,l,d,u,b,p,j,h,f,m,g,x=n(0),O=n.n(x),v=n(70),y=n.n(v),_=(n(86),n(114)),w=n(11),S=n(76),k=n(110),C=(n(87),n(111)),N=n(113),F=new C.a({uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ENV:"pk.eyJ1IjoibWF0dGFwYW4tbWFwcGluZyIsImEiOiJjbDFtdGx0ZGswNGM3M2Ntb2s3dXRjazA4In0.rNVTt3z1Fr52sjFi1BGLfg"}).REACT_APP_GRAPHQL_URI,cache:new N.a}),z={spacing:{xs:"4px",s:"8px",m:"16px",l:"24px",xl:"32px",xxl:"40px"},mediaQuery:{tablet:"576px",desktop:"921px"},fonts:{fontFamily:{header:"'Baron Neue', sans-serif",body:"'Lato', sans-serif"},fontWeight:{bold:700,semiBold:500,regular:400},fontSize:{headline:"72px",subHeadline:"60px",title:"40px",subtitle:"32px",large:"24px",regular:"16px",small:"12px"}},colors:{peach:"#FEC0AA",green:"#226653",teal:"#2A9D8F",orange:"#ED5D31",brown:"#4D4319",red:"#D32F2F",blue:"#B4DAF9",black:"#000000",white:"#FFFFFF"},map:{street:"mapbox://styles/mapbox/streets-v11",outdoor:"mapbox://styles/mapbox/outdoors-v11",light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/mapbox/dark-v10",satellite:"mapbox://styles/mapbox/satellite-v9",satelliteStreet:"mapbox://styles/mapbox/satellite-streets-v11",navigationDay:"mapbox://styles/mapbox/navigation-day-v1",navigationNight:"mapbox://styles/mapbox/navigation-night-v1"}},E=n(6),A=n(8),M=n(2),T=A.a.a(r||(r=Object(E.a)(["\n    display: inline-block;\n    text-decoration: none;\n"]))),P=A.a.span(i||(i=Object(E.a)(["\n    padding: 0 ",";\n    font-family: ",";\n    font-size: ",";\n    color: ",";\n    transition: color ease .2s;\n\n    &:hover {\n        color: ",";\n    }\n"])),(function(e){return e.theme.spacing.s}),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.regular}),(function(e){return e.theme.colors.black}),(function(e){return e.color})),I=A.a.span(a||(a=Object(E.a)(["\n    font-family: ",";\n    font-size: ",";\n    font-weight: ",";\n    color: ",";\n    padding: 0 ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subtitle}),(function(e){return e.theme.fonts.fontWeight.bold}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.spacing.s})),D=function(e){var t=e.href,n=e.children,r=e.color;return Object(M.jsxs)(T,{href:t,children:[" ",Object(M.jsx)(P,{color:r,children:n})]})},H=function(e){var t=e.href,n=e.children;return Object(M.jsx)(T,{target:"_blank",href:t,children:n})},B=n.p+"static/media/mattapan_mapping_logo_2.f5c2e6bf.svg",G=A.a.div(o||(o=Object(E.a)(["\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n  width: 100px;\n  height: 100px;\n"]))),L=Object(A.a)(G)(c||(c=Object(E.a)(["\n\twidth: 200px;\n\theight: 200px;\n"]))),R=Object(A.a)(G)(s||(s=Object(E.a)(["\n  background-image: url('https://tinyurl.com/57ftrcev');\n"]))),W=Object(A.a)(G)(l||(l=Object(E.a)(["\n  background-image: url('https://tinyurl.com/jra96rec');\n"]))),Z=Object(A.a)(L)(d||(d=Object(E.a)(["\n  background-image: url(",");\n"])),B),q=A.a.div(u||(u=Object(E.a)(["\n\tdisplay: none;\n\n\t@media (min-width: ",") {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet})),V=A.a.div(b||(b=Object(E.a)(["\n\theight: 100px;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n"]))),J=function(e){var t=e.className;return Object(M.jsxs)(V,{className:t,children:[Object(M.jsx)(q,{children:Object(M.jsx)(T,{href:"/",children:Object(M.jsx)(Z,{})})}),Object(M.jsx)(T,{href:"/",color:z.colors.black,children:Object(M.jsx)(I,{children:"Mattapan Boston"})}),Object(M.jsxs)("div",{children:[Object(M.jsx)(D,{href:"/about",color:z.colors.blue,children:"About"}),Object(M.jsx)(D,{href:"/explore",color:z.colors.blue,children:"Explore"}),Object(M.jsx)(D,{href:"/map",color:z.colors.peach,children:"Map"}),Object(M.jsx)(D,{href:"/meet",color:z.colors.teal,children:"Meet"}),Object(M.jsx)(D,{href:"/share",color:z.colors.orange,children:"Share"}),Object(M.jsx)(D,{href:"/act",color:z.colors.red,children:"Act"})]})]})},Q=A.a.div(p||(p=Object(E.a)(["\n  height: 250px;\n  background-color: #4c4141;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  /* FIXME: also styles HeaderTitle */\n  span {\n    font-family: ",";\n    color: ",";\n  }\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.colors.white})),U=A.a.div(j||(j=Object(E.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),K=function(e){var t=e.className;return Object(M.jsxs)(Q,{className:t,children:[Object(M.jsx)(I,{children:"Mattapan Boston"}),Object(M.jsx)(U,{children:Object(M.jsxs)(q,{children:[Object(M.jsx)(H,{href:"https://powerfulpathways.org/",children:Object(M.jsx)(R,{})})," |",Object(M.jsx)(H,{href:"https://www.codeforboston.org/",children:Object(M.jsx)(W,{})})]})}),Object(M.jsxs)(U,{children:[Object(M.jsx)("span",{children:"About"}),Object(M.jsx)("span",{children:"Contact"}),Object(M.jsx)("span",{children:"Donate"})]}),Object(M.jsxs)(U,{children:[Object(M.jsx)("span",{children:"For Media"}),Object(M.jsx)("span",{children:"Careers"}),Object(M.jsx)("span",{children:"Newsletter"})]})]})},X=A.a.div(h||(h=Object(E.a)(["\n  min-height: 100vh;\n\n  display: flex;\n  flex-direction: column;\n"]))),Y=A.a.div(f||(f=Object(E.a)(["\n  /* TODO: wrap in component selector */\n  flex-grow: 1;\n  padding: 0 16px;\n\n  @media (min-width: ",") {\n    padding: 0 32px;\n  }\n\n  @media (min-width: ",") {\n    padding: 0 200px;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.mediaQuery.desktop})),$=Object(A.a)(J)(m||(m=Object(E.a)(["\n  padding: 0 16px;\n\n  @media (min-width: ",") {\n    padding: 0 32px;\n  }\n\n  @media (min-width: ",") {\n    padding: 0 200px;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.mediaQuery.desktop})),ee=Object(A.a)(K)(g||(g=Object(E.a)(["\n  padding: 0 16px;\n\n  @media (min-width: ",") {\n    padding: 0 32px;\n  }\n\n  @media (min-width: ",") {\n    padding: 0 200px;\n  }\n"])),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.mediaQuery.desktop})),te=function(e){var t=e.children;return Object(M.jsxs)(X,{children:[Object(M.jsx)($,{}),Object(M.jsx)(Y,{children:t}),Object(M.jsx)(ee,{})]})};function ne(){return Object(M.jsx)(te,{children:Object(M.jsx)("h1",{children:"About"})})}function re(){return Object(M.jsx)(te,{children:Object(M.jsx)("h1",{children:"Contact"})})}var ie,ae,oe,ce,se,le,de,ue,be,pe,je,he,fe,me,ge,xe,Oe,ve,ye,_e,we=n(37),Se=n.n(we),ke=n(52),Ce=n(36),Ne=n(16),Fe=n(9),ze=[{id:"greaterMattapanZoning",file:"./boundaries/greater_mattapan_zoning.json",color:z.colors.peach,visible:!1},{id:"zoningSubdistricts",file:"./boundaries/1Zoning_Subdistricts.geojson",color:z.colors.peach,visible:!1},{id:"dotHpZoningSubdistricts",file:"./boundaries/Dot_HP_Zoning_Subdistricts.json",color:z.colors.peach,visible:!1},{id:"greaterMattapanMergedPoly",file:"./boundaries/Greater_Mattapan_Merged_Poly.json",color:z.colors.peach,visible:!1},{id:"greaterMattapanNeighborhoodLine",file:"./boundaries/Greater_Mattapan_Neighborhood_Line.json",color:z.colors.blue,visible:!1},{id:"mattapanNeighborhood",file:"./boundaries/mattapan_neighborhood.json",color:z.colors.blue,visible:!1},{id:"mattapanSquare",file:"./boundaries/Mattapan_Square_qtr_mile.json",color:z.colors.teal,visible:!1},{id:"mattapanZoningSubdistricts",file:"./boundaries/Mattapan_Zoning_subdistricts.geojson",color:z.colors.blue,visible:!1},{id:"mattapanPlanningDistrict",file:"./boundaries/mattapan_planning_district.json",color:z.colors.blue,visible:!1},{id:"mattapanPlanBoundary",file:"./boundaries/PLAN_Mattapan_Poly.json",color:z.colors.blue,visible:!1},{id:"mortonStCorridor",file:"./boundaries/Morton_St_Corridor.json",color:z.colors.orange,visible:!1},{id:"riverStCorridor",file:"./boundaries/River_St_Corridor_FeaturesTo.json",color:z.colors.orange,visible:!1},{id:"cummimnsHwyCorridor",file:"./boundaries/Cummins_Hwy_Corridor.json",color:z.colors.orange,visible:!1},{id:"blueHillAveCorridor",file:"./boundaries/Blue_Hill_Ave_Corridor.json",color:z.colors.orange,visible:!1},{id:"subDistricts",file:"./boundaries/sd.json",color:z.colors.blue,visible:!1},{id:"transportLayer",file:"./boundaries/BTD_transportation_projects.geojson",color:z.colors.orange,visible:!1}],Ee=function(e){return e.reduce((function(e,t){return Object.assign(e,Object(Ce.a)({},t.id,t.visible))}),{})},Ae=[{name:"Housing",color:z.colors.orange,visible:["greaterMattapanZoning","dotHpZoningSubdistricts","mattapanSquare"]},{name:"How is Land Used",color:z.colors.green,visible:["cummimnsHwyCorridor","mattapanPlanBoundary","mattapanSquare"]},{name:"New to Mattapan",color:z.colors.blue,visible:["blueHillAveCorridor","greaterMattapanMergedPoly","zoningSubdistricts"]},{name:"Mattapan Love Stories",color:z.colors.brown,visible:["subDistricts","riverStCorridor","mattapanZoningSubdistricts"]}],Me=A.a.span(ie||(ie=Object(E.a)(["\n  color: ",";\n"])),(function(e){return e.color})),Te=Object(A.a)(Me)(ae||(ae=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.headline})),Pe=Object(A.a)(Me)(oe||(oe=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subHeadline})),Ie=(Object(A.a)(Me)(ce||(ce=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.title}),(function(e){return e.theme.fonts.fontWeight.bold})),Object(A.a)(Me)(se||(se=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.title}))),De=(Object(A.a)(Me)(le||(le=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subtitle})),Object(A.a)(Me)(de||(de=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.large})),Object(A.a)(Me)(ue||(ue=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.regular})),Object(A.a)(Me)(be||(be=Object(E.a)(["\n  font-family: ",";\n  font-size: ",";\n"])),(function(e){return e.theme.fonts.fontFamily.body}),(function(e){return e.theme.fonts.fontSize.small}))),He=A.a.div(pe||(pe=Object(E.a)(["\n  font-size: ",";\n  background: #fff;\n  box-shadow: 0 0 4px ",";\n  margin: 24px;\n  padding: "," ",";\n  outline: none;\n  cursor: auto;\n"])),(function(e){return e.theme.fonts.fontSize.regular}),(function(e){return e.theme.colors.black}),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.spacing.l})),Be=A.a.div(je||(je=Object(E.a)(["\n  -webkit-border-radius: 8px;\n  -moz-border-radius: 8px;\n  border-radius: 8px;\n  margin: 0 ",";\n  border: 1px solid ",";\n  background-color: ",";\n  width: ",";\n  height: ",";\n"])),(function(e){return e.theme.spacing.xs}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.theme.spacing.s}),(function(e){return e.theme.spacing.s})),Ge=A.a.div(he||(he=Object(E.a)(["\n  display: flex;\n  align-items: center;\n"]))),Le=function(e){var t=e.data,n=e.toggleState,r=e.toggleHandler;return Object(M.jsx)(He,{children:t.map((function(e){return Object(M.jsxs)(Ge,{children:[Object(M.jsx)("input",{checked:n[e.id],type:"checkbox",onChange:function(){return r(e.id)}}),Object(M.jsx)(Be,{color:e.color}),Object(M.jsx)("span",{children:e.name})]},e.id)}))})},Re=A.a.button(fe||(fe=Object(E.a)(["\n  background: ",";\n  border: none;\n  border-radius: 4px;\n  margin: "," 0;\n  padding: ",";\n  transition: all ease 0.2s;\n\n  &:hover {\n    background: silver;\n    color: white;\n  }\n"])),(function(e){return e.theme.colors.white}),(function(e){return e.theme.spacing.s}),(function(e){return e.theme.spacing.m})),We=A.a.div(me||(me=Object(E.a)(["\n  display: flex;\n  flex-direction: column;\n"]))),Ze=A.a.div(ge||(ge=Object(E.a)(["\n  background: ",";\n  height: 100vh;\n  width: 550px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  padding: 0 ",";\n  transition: background ease 0.5s;\n"])),(function(e){return e.color}),(function(e){return e.theme.spacing.l})),qe=Object(A.a)(Te)(xe||(xe=Object(E.a)(["\n  color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.colors.white})),Ve=Object(A.a)(Pe)(Oe||(Oe=Object(E.a)(["\n  padding: "," 0;\n  color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.colors.white})),Je=Object(A.a)(Ie)(ve||(ve=Object(E.a)(["\n  padding: "," 0;\n  color: ",";\n  text-align: center;\n"])),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.colors.white})),Qe=function(e){var t=e.onNarrativeChange;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ve,{children:"Choose a narrative"}),Object(M.jsx)(We,{children:Ae.map((function(e){return Object(M.jsx)(Re,{onClick:function(){return t(e.color,e.name)},children:Object(M.jsx)(De,{children:e.name})},e.name)}))})]})},Ue=function(e){var t=e.narrative,n=e.data,r=e.toggleState,i=e.toggleHandler,a=e.onNarrativeChange;return t?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Je,{children:t}),Object(M.jsx)(Re,{onClick:function(){return a(z.colors.peach,"")},children:"Choose another Narrative"}),Object(M.jsx)(Le,{data:n,toggleState:r,toggleHandler:i})]}):Object(M.jsx)(Qe,{onNarrativeChange:a})},Ke=function(e){var t=e.narrative,n=e.data,r=e.toggleState,i=e.toggleHandler,a=e.setNarrative,o=x.useState(z.colors.peach),c=Object(Fe.a)(o,2),s=c[0],l=c[1];return Object(M.jsxs)(Ze,{color:s,children:[Object(M.jsx)(qe,{color:z.colors.white,children:"EXPLORE"}),Object(M.jsx)(Ue,{narrative:t,data:n,toggleState:r,toggleHandler:i,onNarrativeChange:function(e,t){l(e),a(t)}})]})},Xe=n(31),Ye=function(e){var t,n,r=e.startingCoordinates,i=e.children,a=e.mapStyle,o=x.useState({latitude:null!==(t=null===r||void 0===r?void 0:r.lat)&&void 0!==t?t:42.286,longitude:null!==(n=null===r||void 0===r?void 0:r.lng)&&void 0!==n?n:-71.088,zoom:12.1,width:"100%",height:"100%"}),c=Object(Fe.a)(o,2),s=c[0],l=c[1];return Object(M.jsx)(Xe.e,Object(Ne.a)(Object(Ne.a)(Object(Ne.a)({},s),{touchZoom:!1,doubleClickZoom:!1}),{},{mapboxApiAccessToken:"pk.eyJ1IjoibWF0dGFwYW4tbWFwcGluZyIsImEiOiJjbDFtdGx0ZGswNGM3M2Ntb2s3dXRjazA4In0.rNVTt3z1Fr52sjFi1BGLfg",onViewportChange:function(e){return l(e)},mapStyle:null!==a&&void 0!==a?a:z.map.light,children:i}))},$e=(A.a.div(ye||(ye=Object(E.a)(["\n\tposition: relative;\n  height: 90vh;\n\twidth: 80vw;\n\tbox-shadow: 0 0 2px 2px black;\n\tmargin: 0 auto;\n\tmargin-bottom: 24px;\n\n\t.map {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\toverflow: visible;\n\t}\n"]))),A.a.p(_e||(_e=Object(E.a)(["\n\tfont-family: ",";\n\tfont-size: ",";\n\ttext-align: center;\n\tmargin: 24px auto;\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.fonts.fontSize.subtitle})),function(e){var t=e.data,n=e.id,r=e.type,i=e.color;if(!e.visible)return null;var a={id:n,type:r,paint:"line"===r?{"line-color":i}:"fill"===r?{"fill-color":i}:void 0};return Object(M.jsx)(Xe.d,{type:"geojson",data:t,children:Object(M.jsx)(Xe.a,Object(Ne.a)({},a))})});function et(e){var t=e.size,n=void 0===t?20:t,r=e.color,i={fill:void 0===r?z.colors.orange:r,stroke:"none",display:"block"};return Object(M.jsx)("svg",{height:n,viewBox:"0 0 16 16",style:i,children:Object(M.jsx)("path",{d:"M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"})})}var tt,nt,rt,it,at,ot,ct,st,lt,dt,ut,bt=function(e){var t=e.geoJsonData,n=e.toggleState;return Object(M.jsx)(M.Fragment,{children:t.map((function(e){return Object(M.jsx)($e,{data:e.data,id:e.id,type:e.type,color:e.color,visible:n[e.id]},e.id)}))})},pt=n(112),jt=n(77),ht=(n(109),{});!function(e){e.Color="color",e.File="file",e.Id="id",e.Name="name"}(rt||(rt={})),function(e){e.Color="color",e.Id="id",e.Name="name"}(it||(it={})),function(e){e.Author="author",e.Id="id",e.Src="src",e.Transcript="transcript"}(at||(at={})),function(e){e.VisiblesPkey="Visibles_pkey"}(ot||(ot={})),function(e){e.BoundaryId="boundary_id",e.NarrativeId="narrative_id"}(ct||(ct={})),function(e){e.BoundaryId="boundary_id",e.NarrativeId="narrative_id"}(st||(st={})),function(e){e.BoundaryId="boundary_id",e.Color="color",e.Id="id",e.Name="name"}(lt||(lt={})),function(e){e.BoundaryId="boundary_id",e.Color="color",e.File="file",e.Name="name",e.NarrativeId="narrative_id"}(dt||(dt={})),function(e){e.Asc="asc",e.AscNullsFirst="asc_nulls_first",e.AscNullsLast="asc_nulls_last",e.Desc="desc",e.DescNullsFirst="desc_nulls_first",e.DescNullsLast="desc_nulls_last"}(ut||(ut={}));var ft=Object(pt.a)(tt||(tt=Object(E.a)(["\n    query communityVideos {\n  Videos(order_by: {id: desc}) {\n    id\n    name: author\n    src\n    transcript\n  }\n}\n    "])));var mt,gt,xt=Object(pt.a)(nt||(nt=Object(E.a)(["\n    query mapPage {\n  Narratives(order_by: {id: asc}) {\n    id\n    name\n    color\n    boundaries(order_by: {boundary_id: asc}) {\n      id: boundary_id\n    }\n  }\n  Boundaries {\n    id\n    name\n    data: file\n    color\n  }\n}\n    "])));var Ot,vt,yt=A.a.div(mt||(mt=Object(E.a)(["\n  display: flex;\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n"]))),_t=A.a.div(gt||(gt=Object(E.a)(["\n  display: flex;\n  height: 100%;\n  width: 100%;\n"]))),wt=ze.map((function(e){return e.file})),St=ze.map((function(e){return e.id})),kt=wt.map((function(e){return fetch(e).then((function(e){return e.json()}))}));function Ct(){var e=function(e){var t=Object(Ne.a)(Object(Ne.a)({},ht),e);return jt.a(xt,t)}().data,t=x.useState([]),n=Object(Fe.a)(t,2),r=n[0],i=n[1],a=x.useState([]),o=Object(Fe.a)(a,2),c=o[0],s=o[1],l=x.useState({}),d=Object(Fe.a)(l,2),u=d[0],b=d[1],p=x.useState(""),j=Object(Fe.a)(p,2),h=j[0],f=j[1],m=e||{},g=m.Narratives,O=m.Boundaries;console.log({gqlNarrative:g,gqlBoundaries:O});return x.useEffect((function(){var e=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(kt);case 3:t=e.sent,n=St.map((function(e,n){var r;return{data:t[n],name:null!==(r=t[n].name)&&void 0!==r?r:"Name missing from data",id:e,type:"line",color:ze[n].color,visible:ze[n].visible}})),i(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Explore page data fetch failed: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),x.useEffect((function(){if(void 0!==g&&void 0!==O){var e=g.filter((function(e){return e.name===h}));if(0===e.length)return;var t=e[0],n=JSON.parse(JSON.stringify(r));t.boundaries.forEach((function(e){var t=e.id;if(void 0!==t&&null!==t){var r=O.findIndex((function(e){return e.id===t})),i=O[r].name,a=n.findIndex((function(e){return e.id===i}));n[a].visible=!0}})),s(n),b(Ee(n))}else s(r),b({})}),[h,r,g,O]),Object(M.jsxs)(X,{children:[Object(M.jsx)($,{}),Object(M.jsxs)(_t,{children:[Object(M.jsx)(Ke,{narrative:h,data:c,toggleState:u,toggleHandler:function(e){b(Object(Ne.a)(Object(Ne.a)({},u),{},Object(Ce.a)({},e,!u[e])))},setNarrative:f}),Object(M.jsx)(yt,{children:Object(M.jsx)(Ye,{mapStyle:z.map.dark,children:Object(M.jsx)(bt,{geoJsonData:c,toggleState:u})})})]}),Object(M.jsx)(ee,{})]})}function Nt(){return Object(M.jsx)(te,{children:Object(M.jsx)("h1",{children:"Explore"})})}function Ft(){return Object(M.jsx)(te,{children:Object(M.jsx)("h1",{children:"Get Involved"})})}var zt,Et,At,Mt,Tt,Pt=A.a.div(Ot||(Ot=Object(E.a)(["\n    width: 100%;\n\n    @media (min-width: ",") {\n        flex-grow: 1;\n        width: 25%;\n        padding: 20px;\n        position: relative;\n    }"])),(function(e){return e.theme.mediaQuery.tablet})),It=A.a.video(vt||(vt=Object(E.a)(["\n    width: 100%;\n"]))),Dt=function(e){var t=Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(It,{onClick:function(){e.onVideoClickHander(e.id)},autoPlay:e.autoplay,loop:e.loop,muted:e.muted,ref:function(e){null!=e&&(e.currentTime=0)},children:Object(M.jsx)("source",{src:e.src,type:"video/mp4"})}),Object(M.jsxs)("div",{className:"video-meta",children:[Object(M.jsx)("div",{className:"speaker-name",children:e.speakerName}),Object(M.jsx)("div",{className:"transcript",children:e.transcript})]})]}),n=Object(M.jsx)("div",{children:" error "});return Object(M.jsx)(Pt,{children:e.src?t:n})},Ht=A.a.div(zt||(zt=Object(E.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  width: 100%;\n"])));function Bt(){var e=function(e){var t=Object(Ne.a)(Object(Ne.a)({},ht),e);return jt.a(ft,t)}(),t=e.data,n=e.loading,r=e.error,i=Object(x.useState)(-1),a=Object(Fe.a)(i,2),o=a[0],c=a[1];function s(e){c(e)}return Object(M.jsx)(te,{children:Object(M.jsx)(Ht,{children:n?Object(M.jsx)("span",{children:"Loading"}):r?Object(M.jsx)("span",{children:"Error"}):void 0===t?Object(M.jsx)("span",{children:"There's no video..."}):t.Videos.map((function(e){var t=e.id,n=e.name,r=e.src,i=e.transcript;return Object(M.jsx)(Dt,{id:t,loop:-1===o||o===t,src:r,speakerName:n,transcript:i||"No description.",autoplay:-1===o||o===t,muted:o!==t,onVideoClickHander:s},t)}))})})}var Gt,Lt=A.a.div(Et||(Et=Object(E.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  grid-template-rows: 1fr 1fr 1fr;\n  column-gap: ",";\n  row-gap: ",";\n  background: radial-gradient(silver, transparent 60%);\n\n  @media (min-width: ",") {\n    grid-template-columns: 1fr 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n    column-gap: ",";\n    row-gap: ",";\n  }\n"])),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.spacing.m}),(function(e){return e.theme.mediaQuery.tablet}),(function(e){return e.theme.spacing.l}),(function(e){return e.theme.spacing.l})),Rt=A.a.div(At||(At=Object(E.a)(["\n  width: 100%;\n  height: 500px;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    .card-image {\n      transform: scale(1);\n    }\n    .card-info {\n      transform: translateY(-100%);\n    }\n  }\n"]))),Wt=A.a.div(Mt||(Mt=Object(E.a)(["\n  height: 100%;\n  width: 100%;\n  transform: scale(0.8);\n  transition: transform 0.2s ease-in;\n  background-image: url(",");\n  background-size: cover;\n  background-repeat: no-repeat;\n  box-shadow: 0 0 24px 0 black;\n"])),(function(e){return e.src})),Zt=A.a.span(Tt||(Tt=Object(E.a)(["\n  position: absolute;\n  color: white;\n  transform: translateY(-50%);\n  top: 50%;\n  left: 8px;\n  font-size: 48px;\n  font-family: ",";\n  z-index: 4;\n  text-shadow: 0 0 2px black;\n\n  @media (min-width: ",") {\n    font-size: 48px;\n  }\n"])),(function(e){return e.theme.fonts.fontFamily.header}),(function(e){return e.theme.mediaQuery.tablet})),qt=function(e){e.children;var t=e.color,n=e.src,r=e.title;return Object(M.jsxs)(Rt,{color:t,children:[Object(M.jsx)(Zt,{children:r}),Object(M.jsx)(Wt,{className:"card-image",src:n})]})},Vt=function(){return Object(M.jsxs)(Lt,{children:[Object(M.jsx)(qt,{title:"About",color:z.colors.blue,src:"https://upload.wikimedia.org/wikipedia/commons/3/3b/Mattapan_M_Line_Trolley_3254.jpg",children:"More info on About"}),Object(M.jsx)(qt,{title:"Explore",color:z.colors.peach,src:"https://cdn10.bostonmagazine.com/wp-content/uploads/sites/2/2018/12/mattapan1.jpg",children:"More info on Explore"}),Object(M.jsx)(qt,{title:"Meet",color:z.colors.teal,src:"https://assets.simpleviewinc.com/simpleview/image/upload/c_fill,f_jpg,g_xy_center,h_748,q_65,w_640,x_836,y_394/v1/clients/boston/Mattapan_KyleKlein_KKP11885_6575163c-84da-4e45-a1a0-e7b1f4724191.jpg",children:"Meet"}),Object(M.jsx)(qt,{title:"Share",color:z.colors.orange,src:"https://i.pinimg.com/originals/b7/20/98/b720983ab02bbdf91e643427d17470cb.jpg",children:"More info on Share"}),Object(M.jsx)(qt,{title:"Get Involved",color:z.colors.red,src:"https://images1.apartments.com/i2/C-nvX3YH0OZYtCUKBXUSgYr9XOvRY4U8cKwa-F2isvg/111/78-mattapan-st-unit-1-boston-ma-exterior.jpg",children:"More info on Get Involved"}),Object(M.jsx)(qt,{title:"Contact Us?",color:z.colors.brown,src:"https://scontent-bos3-1.xx.fbcdn.net/v/t1.6435-9/p960x960/120760232_3847173248643441_4683888836416691032_n.jpg?_nc_cat=104&ccb=1-5&_nc_sid=36a2c1&_nc_ohc=CFsgtqppGvcAX_ZnzNE&_nc_ht=scontent-bos3-1.xx&oh=dc1f7a638e4cc2fcf5150610c79d1c42&oe=618D5C99",children:"More info on Contact Us?"})]})},Jt=A.a.video(Gt||(Gt=Object(E.a)(["\n    width: 100%;\n    box-shadow: 0 0 24px 0 black;\n    border-radius: 4px;\n"]))),Qt=function(){return Object(M.jsx)(Jt,{autoPlay:!0,muted:!0,loop:!0,preload:"auto",playsInline:!0,src:"https://assets.mixkit.co/videos/preview/mixkit-daytime-city-traffic-aerial-view-56-large.mp4"})};function Ut(){return Object(M.jsxs)(te,{children:[Object(M.jsx)(Qt,{}),Object(M.jsx)(Vt,{})]})}function Kt(){return Object(M.jsx)(te,{children:Object(M.jsx)("h1",{children:"Share"})})}n(95),n(96);var Xt,Yt,$t=function(){return null},en=n(65);function tn(e){var t=e.id,n=e.content,r=e.title,i=e.image,a=e.isActive,o=e.hidden,c=e.alignment;return Object(M.jsx)("div",{id:t,className:"step ".concat(a?"active":""," ").concat(c," ").concat(o?"hidden":""),children:Object(M.jsxs)("div",{className:"light",children:[Object(M.jsx)("h3",{children:r}),Object(M.jsx)("img",{src:i,alt:""}),Object(M.jsx)("p",{children:n})]})})}var nn=A.a.header(Xt||(Xt=Object(E.a)(["\n  margin: auto;\n  width: 100%;\n  position: relative;\n  z-index: 5;\n"]))),rn=A.a.footer(Yt||(Yt=Object(E.a)(["\n  width: 100%;\n  min-height: 5vh;\n  padding-top: 2vh;\n  padding-bottom: 2vh;\n  text-align: center;\n  line-height: 25px;\n  font-size: 13px;\n  position: relative;\n  z-index: 5;\n"])));function an(e){var t=e.title,n=e.subtitle,r=e.byline;return Object(M.jsxs)(nn,{id:"header",className:"dark",children:[Object(M.jsx)("h1",{children:t}),Object(M.jsx)("h2",{children:n}),Object(M.jsx)("p",{children:r})]})}function on(e){var t=e.footerHtml;return Object(M.jsx)(rn,{id:"footer",className:"dark",children:Object(M.jsx)("p",{dangerouslySetInnerHTML:{__html:t}})})}var cn={fill:["fill-opacity"],line:["line-opacity"],circle:["circle-opacity","circle-stroke-opacity"],symbol:["icon-opacity","text-opacity"],raster:["raster-opacity"],"fill-extrusion":["fill-extrusion-opacity"],heatmap:["heatmap-opacity"]},sn={left:"lefty",center:"centered",right:"righty",full:"fully"};function ln(e){var t=e.onMarkerCoordsChange,n=e.chapterData,r=e.headerTitle,i=e.headerSubtitle,a=e.headerByline,o=e.footerHtml,c=e.showMarkers,s=e.toggleLayer,l=O.a.useState(""),d=Object(Fe.a)(l,2),u=d[0],b=d[1],p=O.a.useContext(Xe.b).map,j=O.a.useState(p.current),h=Object(Fe.a)(j,2),f=h[0],m=h[1];function g(e){var t=e.layer,n=e.duration,r=e.opacity;if(f){var i=function(e){if(f){var t,n=null===(t=f.getLayer(e))||void 0===t?void 0:t.type;return cn[n]}}(t);null===i||void 0===i||i.forEach((function(e){var i={};if(n){var a="".concat(e,"-transition");i={duration:n},f.setPaintProperty(t,a,i)}f.setPaintProperty(t,e,r,i)}))}}O.a.useEffect((function(){var e;m(null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.getMap())}),[p]);var x=n.map((function(e,t){return Object(M.jsx)(en.b,{data:e.id,children:Object(M.jsx)("div",{children:Object(M.jsx)(tn,{id:e.id,title:e.title,content:e.description,image:e.image,alignment:sn[e.alignment]||"centered",hidden:e.hidden,isActive:e.id===u},e.id)})},e.id)}));return Object(M.jsxs)("div",{id:"story",children:[Object(M.jsx)(an,{title:r,subtitle:i,byline:a}),Object(M.jsx)("div",{id:"features",style:{paddingTop:"10vh",paddingBottom:"10vh"},children:Object(M.jsx)(en.a,{onStepEnter:function(e){var r=e.data;b(r);var i=n.find((function(e){return e.id===r}));f&&f[i.mapAnimation||"flyTo"](i.location),c&&t(i.location.center),i.onChapterEnter.length>0&&i.onChapterEnter.forEach((function(e){s(e.layer),g(e)})),i.callback,i.rotateAnimation&&f&&f.once("moveend",(function(){var e=f.getBearing();f.rotateTo(e+180,{duration:3e4,easing:function(e){return e}})}))},onStepExit:function(e){var t=e.data,r=n.find((function(e){return e.id===t}));r.onChapterExit.length>0&&r.onChapterExit.forEach((function(e){s(e.layer),g(e)}))},offset:.5,children:x})}),Object(M.jsx)(on,{footerHtml:o})]})}n(97);var dn="pk.eyJ1IjoibWF0dGFwYW4tbWFwcGluZyIsImEiOiJjbDFtdGx0ZGswNGM3M2Ntb2s3dXRjazA4In0.rNVTt3z1Fr52sjFi1BGLfg",un=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_ENV:"pk.eyJ1IjoibWF0dGFwYW4tbWFwcGluZyIsImEiOiJjbDFtdGx0ZGswNGM3M2Ntb2s3dXRjazA4In0.rNVTt3z1Fr52sjFi1BGLfg"}).REACT_APP_GRAPHQL_URI,bn=ze.map((function(e){return e.file})),pn=ze.map((function(e){return e.id})),jn=bn.map((function(e){return fetch(e).then((function(e){return e.json()}))})),hn={method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"\n    query ChaptersList {\n        chapters: storytelling_chapter(order_by: {id: asc}) {\n            id: name\n            alignment\n            hidden\n            title\n            image\n            description\n            location {\n                center\n                zoom\n                pitch\n                bearing\n                curve\n                max_duration\n                min_zoom\n                screen_speed\n                speed\n            }\n            mapAnimation\n            rotateAnimation\n            callback\n            onChapterEnter {\n                layer\n                opacity\n                duration\n            }\n            onChapterExit {\n                layer\n                opacity\n                duration\n            }\n        }\n    }"})},fn="mapbox://styles/mattapan-mapping/cl1mtp3gy000k14mblgpwmoh8",mn=dn,gn=!0,xn="#3FB1CE",On="The Title Text of this Story",vn="A descriptive and interesting subtitle to draw in the reader",yn="By a Digital Storyteller",_n='Source: source citations, etc. <br> Created using <a href="https://github.com/mapbox/storytelling" target="_blank">Mapbox Storytelling</a> template.',wn=[{id:"slug-style-id",alignment:"left",hidden:!1,title:"Base Title",image:"./path/to/image/source.png",description:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",location:{center:[-71.0869,42.27],zoom:12,pitch:60,bearing:0},mapAnimation:"flyTo",rotateAnimation:!1,callback:"",onChapterEnter:[{layer:"river-st-corridor",opacity:1,duration:5e3},{layer:"transportLayer",opacity:1,duration:5e3},{layer:"cummimnsHwyCorridor",opacity:1,duration:5e3}],onChapterExit:[{layer:"river-st-corridor",opacity:0},{layer:"transportLayer",opacity:0,duration:5e3},{layer:"cummimnsHwyCorridor",opacity:0,duration:5e3}]},{id:"second-identifier",alignment:"right",hidden:!1,title:"Second Title",image:"./path/to/image/source.png",description:"Copy these sections to add to your story.",location:{center:[-71.0869,42.27],zoom:12,pitch:60,bearing:0},mapAnimation:"flyTo",rotateAnimation:!0,callback:"",onChapterEnter:[{layer:"zoning-subdistricts",opacity:1,duration:1e3},{layer:"mattapanPlanBoundary",opacity:1,duration:1e3}],onChapterExit:[{layer:"zoning-subdistricts",opacity:0},{layer:"mattapanPlanBoundary",opacity:0,duration:1e3}]}],Sn=function(e){var t=-1!==(null===e||void 0===e?void 0:e.indexOf("?"));return{url:e+(t?"&pluginName=scrollytellingV2":"?pluginName=scrollytellingV2")}},kn=function(e){var t,n,r,i,a,o=O.a.useState([]),c=Object(Fe.a)(o,2),s=c[0],l=c[1],d=O.a.useState(wn[0].location.center),u=Object(Fe.a)(d,2),b=u[0],p=u[1],j=O.a.useState([]),h=Object(Fe.a)(j,2),f=h[0],m=h[1],g=O.a.useState({}),x=Object(Fe.a)(g,2),v=x[0],y=x[1],_=O.a.useRef({}),w=function(e){_.current=e,y(e)},S=O.a.useState({longitude:null!==(t=wn[0].location.center[0])&&void 0!==t?t:-71.088,latitude:null!==(n=wn[0].location.center[1])&&void 0!==n?n:42.286,zoom:null!==(r=wn[0].location.zoom)&&void 0!==r?r:12.1,bearing:null!==(i=wn[0].location.bearing)&&void 0!==i?i:0,pitch:null!==(a=wn[0].location.pitch)&&void 0!==a?a:0,width:"100%",height:"100%"}),k=Object(Fe.a)(S,1)[0],C=O.a.createRef();return O.a.useEffect((function(){var e=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(un,hn).then((function(e){return e.json()}));case 3:t=e.sent,n=t.data,l(n.chapters),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),l(wn),console.error("Story map page failed to fetch config data from graphql",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(ke.a)(Se.a.mark((function e(){var t,n;return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(jn);case 3:t=e.sent,n=pn.map((function(e,n){var r;return{data:t[n],name:null!==(r=t[n].name)&&void 0!==r?r:"Name missing from data",id:e,type:"line",color:ze[n].color,visible:ze[n].visible}})),m(n),w(Object(Ne.a)(Object(Ne.a)({},Ee(n)),_.current)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Map Story data fetch failed: "+e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();t(),e()}),[]),Object(M.jsxs)(Xe.b.Provider,{value:{map:C,container:null,isDragging:!1,eventManager:void 0},children:[Object(M.jsxs)(Xe.e,Object(Ne.a)(Object(Ne.a)({style:{top:0,height:"100vh",width:"100vw",position:"fixed"},mapStyle:fn},k),{},{transformRequest:Sn,mapboxApiAccessToken:mn||dn,ref:C,children:[Object(M.jsx)(Xe.c,{longitude:b[0],latitude:b[1],offsetLeft:-32,offsetTop:-32,children:Object(M.jsx)(et,{size:32,color:xn})}),Object(M.jsx)(bt,{geoJsonData:f,toggleState:v})]})),Object(M.jsx)(ln,{onMarkerCoordsChange:function(e){e[0]===b[0]&&e[1]===b[1]||p(e)},chapterData:s,headerTitle:On,headerSubtitle:vn,headerByline:yn,footerHtml:_n,showMarkers:gn,toggleLayer:function(e){w(Object(Ne.a)(Object(Ne.a)({},_.current),{},Object(Ce.a)({},e,!_.current[e])))}})]})},Cn=function(){return Object(M.jsx)("h1",{children:"Path Not Recognized"})},Nn=function(){return Object(M.jsxs)(w.c,{children:[Object(M.jsx)(w.a,{path:"/",element:Object(M.jsx)(Ut,{})}),Object(M.jsx)(w.a,{path:"/about",element:Object(M.jsx)(ne,{})}),Object(M.jsx)(w.a,{path:"/explore",element:Object(M.jsx)(Nt,{})}),Object(M.jsx)(w.a,{path:"/map",element:Object(M.jsx)(Ct,{})}),Object(M.jsx)(w.a,{path:"/meet",element:Object(M.jsx)(Bt,{})}),Object(M.jsx)(w.a,{path:"/share",element:Object(M.jsx)(Kt,{})}),Object(M.jsx)(w.a,{path:"/act",element:Object(M.jsx)(Ft,{})}),Object(M.jsx)(w.a,{path:"/contact",element:Object(M.jsx)(re,{})}),Object(M.jsx)(w.a,{path:"/story",element:Object(M.jsx)(kn,{})}),Object(M.jsx)(w.a,{path:"*",element:Object(M.jsx)(Cn,{})})]})};function Fn(){return Object(M.jsxs)(k.a,{client:F,children:[Object(M.jsx)($t,{}),Object(M.jsx)(_.b,{theme:z,children:Object(M.jsx)(S.a,{children:Object(M.jsx)(Nn,{})})})]})}n(98).config(),y.a.render(Object(M.jsx)(O.a.StrictMode,{children:Object(M.jsx)(Fn,{})}),document.getElementById("root"))},86:function(e,t,n){},97:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.165477c4.chunk.js.map